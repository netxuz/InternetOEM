<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title></title>
  <meta charset="utf-8" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" />
  <script type='text/javascript' src="js/knockout-3.4.2.js"></script>

  <script>

  </script>
</head>
<body>
  <div class="container">
    <h3>Bootstrap 3 Popover HTML Example</h3>
    <button id="mensaje" data-placement="right" data-toggle="popover" data-bind="click: function(data, event) { showPopover('param1') }">
      Click me
    </button><br /><br /><br />
    <button id="btnClosePopover" class="btn btn-primary">Cerrar</button>
  </div>


  <div id="popover-content" class="hide">
    <div class="form-group">
      <input class="headerSearch search-query" id="str" name="str" type="text" value="" />
      <span class="glyphicon glyphicon-search" style="margin:3px 8px 0 -20px;"></span>
      
    </div>
  </div>



  <script type="text/javascript">
    var isVisible = false;

    $('#mensaje').popover({
      html: true,
      trigger: 'manual',
      content: function () {
        return $('#popover-content').html();
      }
    }).click(function (e) {
      $(this).popover('show');
      isVisible = true
      e.preventDefault()
    });

    $("#btnClosePopover").click(function () {
      alert('isVisible : ' + isVisible);
      if (isVisible) {
        $('#mensaje').popover('hide')
        isVisible = false
      }
    });

    //$("[data-toggle=popover]").popover({
    //  html: true,
    //  content: function () {
    //    return $('#popover-content').html();
    //  }
    //});

    var viewModel = {
      showPopover: function (data, event) {
        $("#str").val(data);
      }
    };
    ko.applyBindings(viewModel);
  </script>
</body>
</html>
